{% extends "base.html" %}
{% block content %}
    <div class="content">
        {% if hospitals %}
            Hospitals:
            {% for hospital in hospitals %}
                <div class="hospital">
                    Title: {{ hospital.title }} <br/>
                    {% if hospital.doctors.all.count > 0 %}
                        <h3 class="doctors-title">Doctors:</h3>
                        <ul class="doctors">

                            {% for doctor in hospital.doctors.all %}
                                <li><a href='{% url 'ajax_patients_list' doctor.id %}' class="doctor-link" data-id="{{ doctor.id }}">{{ doctor.name }} {{ doctor.surname }}</a></li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        No doctors in this hospital
                    {% endif %}
                </div>
            {% endfor %}
            <div class="patients-list"></div>
        {% else %}
            No hospitals
        {% endif %}

    </div>
    <script type="text/javascript">
        $().ready(function () {
            $('.doctor-link').click(function (e) {
                e.preventDefault();
                $.get($(this).attr('href'),function(data){
                    $('.patients-list').html(data)

                });
            });
        });
    </script>
{% endblock %}